# 猫クイズ機能 機能仕様書

## 1. 機能概要

ユーザーが猫に関するクイズを解き、知識を深めることができる機能。
スタート画面、クイズ画面、結果画面で構成される。

## 2. 機能詳細

### 2.1. スタート画面 (`#start-screen`)

-   **表示内容**:
    -   アプリタイトル「猫クイズアプリ」
    -   キャッチコピー「猫博士を目指そう！」
    -   「クイズスタート！」ボタン
-   **動作**:
    -   「クイズスタート！」ボタンクリックでクイズ画面へ遷移し、クイズを開始する。

### 2.2. クイズ画面 (`#quiz-screen`)

-   **表示内容**:
    -   現在の問題番号 (例: 第1問)
    -   問題文
    -   選択肢ボタン (複数)
    -   フィードバックエリア (回答後に表示)
        -   正誤結果テキスト (例: 「正解！」「残念！不正解...」)
        -   解説文
        -   「次の問題へ」ボタン (回答後に表示)
-   **動作**:
    -   クイズデータ (`quiz_data.js`) からランダムに問題を選択して表示する。
    -   選択肢ボタンをクリックすると、正誤判定が行われる。
        -   正解の場合:
            -   スコアを加算する。
            -   フィードバックエリアに「正解！」と表示し、背景色を変更する。
            -   選択したボタンのスタイルを正解用に変更する。
        -   不正解の場合:
            -   フィードバックエリアに「残念！不正解...」と表示し、背景色を変更する。
            -   選択したボタンのスタイルを不正解用に変更する。
            -   正解の選択肢のスタイルを正解用に変更する。
        -   いずれの場合も解説文を表示する。
    -   回答後は全ての選択肢ボタンを無効化する。
    -   「次の問題へ」ボタンが表示され、クリックすると次の問題へ進む。
    -   全ての問題が終了すると結果画面へ遷移する。

### 2.3. 結果画面 (`#result-screen`)

-   **表示内容**:
    -   タイトル「クイズ結果」
    -   労いのメッセージ「お疲れ様でした！」
    -   最終スコア (例: 「あなたのスコアは: 5問中3問正解です！」)
    -   スコアに応じたメッセージ (例: 「素晴らしい！全問正解です！あなたは猫博士！」)
    -   「もう一度挑戦する」ボタン
-   **動作**:
    -   「もう一度挑戦する」ボタンクリックでスタート画面へ遷移する。

## 3. 使用ファイル

-   `index.html`: アプリ全体のHTML構造
-   `css/style.css`: アプリ全体のスタイリング
-   `js/app.js`: アプリケーション全体の制御、画面遷移
-   `js/quiz.js`: クイズのロジック（問題表示、正誤判定、スコア計算など）
-   `js/data/quiz_data.js`: クイズの問題、選択肢、正解、解説データ

## 4. データ構造 (quiz_data.js)

クイズデータは以下の形式のオブジェクト配列として `quizData` 変数に格納される。

```javascript
const quizData = [
    {
        question: "問題文 (String)",
        image: null, // 画像は現在使用しない (null固定)
        choices: ["選択肢1 (String)", "選択肢2 (String)", ...],
        correctAnswerIndex: 正解の選択肢のインデックス (Number, 0から始まる),
        explanation: "正解の解説文 (String)"
    },
    // ...他の問題データ
];
```

## 5. 主な処理の流れ

1.  `index.html` が読み込まれる。
2.  `app.js` が初期化され、スタート画面が表示される。
3.  ユーザーが「クイズスタート！」ボタンをクリック。
4.  `app.js` が `quiz.js` の `initializeQuiz()` を呼び出す。
5.  `quiz.js` がクイズデータをシャッフルし、最初の問題を表示 (`displayQuestion()`)。
6.  ユーザーが選択肢をクリック。
7.  `quiz.js` が `handleAnswer()` を実行し、正誤判定とフィードバック表示。
8.  ユーザーが「次の問題へ」ボタンをクリック。
9.  `quiz.js` が `goToNextQuestion()` を実行し、次の問題を表示。
10. 全問題が終了すると `quiz.js` から `app.js` の `showResultScreen()` が呼び出される。
11. `app.js` が結果画面を表示。
12. ユーザーが「もう一度挑戦する」ボタンをクリックすると、スタート画面に戻る。

